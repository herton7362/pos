<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <template th:include="wechat/common/header_statics :: header('机具申领 - 支付')" th:remove="tag"></template>
    <link rel="stylesheet" th:href="@{/static/css/wechat.css}"/>
</head>
<!-- ADD THE CLASS layout-top-nav TO REMOVE THE SIDEBAR. -->
<body class="layout-top-nav skin-yellow h5-layout" style="height: auto; min-height: 100%;">
<div id="content"  class="wrapper orderform-new product-list" style="height: auto; min-height: 100%;" v-cloak>

    <!-- Full Width Column -->
    <div class="content-wrapper">
        <div class="container">
            <!-- Main content -->
            <section class="content">
                <div class="weui-cells member-address">
                    <div class="weui-media-box weui-media-box_appmsg member-address-item">
                        <div class="weui-media-box__bd">
                            <div class="row">
                                <div class="col-xs-6">
                                    <p class="weui-media-box__title">
                                        <i class="fa fa-fw fa-map-marker location"></i>
                                        收货人：{{orderForm.deliverToAddress.name}}
                                    </p>
                                </div>
                                <div class="col-xs-6">
                                    <p class="weui-media-box__title" style="text-align: right">{{orderForm.deliverToAddress.tel}}</p>
                                </div>
                            </div>

                            <p class="weui-media-box__desc">收货地址：{{orderForm.deliverToAddress.address | addressName}}{{orderForm.deliverToAddress.detailAddress}}</p>
                        </div>
                        <div class="weui-cell__ft"></div>
                    </div>
                </div>
                <div class="weui-cells">
                    <div class="weui-cell">
                        <div class="weui-cell__bd">
                            <p>
                                <i class="iconfont icon-store" style="font-size: 18px;"></i>
                                机具申领
                            </p>
                        </div>
                    </div>
                    <div class="weui-cell product-item" v-for="item in orderForm.items">
                        <div class="weui-cell__bd">
                            <div class="weui-media-box weui-media-box_appmsg">
                                <div class="weui-media-box__hd">
                                    <img class="weui-media-box__thumb" :src="item.product.coverImage.id | coverPath" alt="item.product.name">
                                </div>
                                <div class="weui-media-box__bd">
                                    <div class="row">
                                        <div class="col-xs-8">
                                            <p class="weui-media-box__title">{{item.product.name}}</p>
                                        </div>
                                        <div class="col-xs-4">
                                            <p class="weui-media-box__title">￥ {{item.product.price | price}}</p>
                                        </div>
                                    </div>

                                    <p class="weui-media-box__title" style="text-align: right">x {{item.count}}</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="weui-cell">
                        <div class="weui-cell__bd">
                            <p>配送方式</p>
                        </div>
                        <div class="weui-cell__ft">
                            <p>免运费</p>
                            <p>普通快递</p>
                        </div>
                    </div>
                    <div class="weui-cells__title">支付方式</div>
                    <div class="weui-cells weui-cells_checkbox">
                        <label class="weui-cell weui-check__label" >
                            <div class="weui-cell__hd">
                                <input type="radio" class="weui-check" name="payType" v-model="payType" value="wechat">
                                <i class="weui-icon-checked"></i>
                            </div>
                            <div class="weui-cell__bd">
                                <p>微信</p>
                            </div>
                        </label>
                        <label class="weui-cell weui-check__label">
                            <div class="weui-cell__hd">
                                <input type="radio" name="payType" class="weui-check" v-model="payType" value="ali">
                                <i class="weui-icon-checked"></i>
                            </div>
                            <div class="weui-cell__bd">
                                <p>支付宝</p>
                            </div>
                        </label>
                    </div>
                    <div class="weui-cell">
                        <div class="weui-cell__hd"><label class="weui-label">买家留言：</label></div>
                        <div class="weui-cell__bd">
                            <input class="weui-input" type="text" v-model="orderForm.remark" placeholder="点击给商家留言">
                        </div>
                    </div>
                    <div class="weui-cell">
                        <div class="weui-cell__hd">
                            <p>合计</p>
                        </div>
                        <div class="weui-cell__bd" style="text-align: right">
                            <p class="main-text-color">￥{{getTotal() | price}}</p>
                        </div>
                    </div>
                </div>
                <div class="weui-cells">
                    <div class="weui-cell">
                        <div class="weui-cell__bd">
                            <p>优惠券</p>
                        </div>
                        <div class="weui-cell__ft">
                            <template v-if="orderForm.coupon && orderForm.coupon.amount">
                                - ￥{{orderForm.coupon.amount | price}}
                            </template>
                            <template v-if="!orderForm.coupon || !orderForm.coupon.amount">
                                无
                            </template>
                        </div>
                    </div>
                    <div class="weui-cell">
                        <div class="weui-cell__bd">
                            <p>
                                积分抵扣
                            </p>
                        </div>
                        <div class="weui-cell__ft">
                            <template v-if="account.point">
                                - ￥{{account.point/100}}（{{account.point}}）
                            </template>
                            <template v-if="!account.point">
                                无
                            </template>
                        </div>
                    </div>
                    <div class="weui-cell">
                        <div class="weui-cell__bd">
                            <p>
                                余额支付
                            </p>
                        </div>
                        <div class="weui-cell__ft">
                            <template v-if="account.balance">
                                - ￥{{account.balance}}
                            </template>
                            <template v-if="!account.balance">
                                无
                            </template>
                        </div>
                    </div>
                </div>
                <div class="weui-cells">
                    <div class="weui-cell">
                        <div class="weui-cell__hd">
                            <p>商品金额</p>
                        </div>
                        <div class="weui-cell__bd" style="text-align: right">
                            <p>￥{{getTotal() | price}}</p>
                        </div>
                    </div>
                    <div class="weui-cell">
                        <div class="weui-cell__hd">
                            <p>运费</p>
                        </div>
                        <div class="weui-cell__bd" style="text-align: right">
                            <p> + ￥0.00</p>
                        </div>
                    </div>
                </div>
            </section>
            <!-- /.content -->
        </div>
        <!-- /.container -->
    </div>
    <div class="row tabbar">
        <div class="col-xs-8 total">
            <span>合计：</span>
            <span class="main-text-color">￥{{getFinalTotal() | price}}</span>
        </div>
        <div class="col-xs-4 padding-none">
            <button type="button" class="btn btn-flat submit-order main-btn" @click="pay">支付</button>
        </div>
    </div>
    <aside th:replace="wechat/common/aside"></aside>
    <!-- /.content-wrapper -->
</div>
<!-- ./wrapper -->
<footer th:replace="wechat/common/footer_statics"></footer>
<script th:src="@{/static/js/wechat/orderform/un_pay.js}"></script>
</body>
</html>
